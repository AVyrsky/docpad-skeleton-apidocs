
var app = angular.module('statusPage',['ngRoute', 'ui.bootstrap']);

/* ************CONFIG SECTION**************** */
app.config(function($routeProvider, $locationProvider) {
    //$locationProvider.html5Mode(true).hashPrefix();

    $routeProvider.
        when('/', {
        controller: '',
        templateUrl: '/internal/statuspage/manage/landingPage.html'
  }).
    when('/maintenance', {
    controller: '',
    templateUrl: '/internal/statuspage/manage/maintenance.html'
  }).
    when('/stage', {
    controller: 'GetServicesController',
    templateUrl: '/internal/statuspage/manage/displayServices.html',
        resolve: {
            isStage: function(){
                return true;
            }
        }

   }).
    when('/prod', {
        controller: 'GetServicesController',
        templateUrl: '/internal/statuspage/manage/displayServices.html',
            resolve: {
                isStage: function(){
                    return false;
                }
            }

    }).
    when('/add', {
        controller: 'AddServicesController',
        templateUrl: '/internal/statuspage/manage/addService.html',
        resolve: {
            isStage: function(){
                return true;
            }
        }

    }).
    when('/addprod', {
    controller: 'AddServicesController',
    templateUrl: '/internal/statuspage/manage/addService.html',
    resolve: {
        isStage: function(){
            return false;
        }
    }
  }).
    when('/edit', {
    controller: 'EditServicesController',
    templateUrl: '/internal/statuspage/manage/editServices.html'
  }).
    when('/incidents/edit/:id', {
    controller: 'IncidentEditController',
    templateUrl: '/internal/statuspage/views/incidents/editIncident.html'
  }).
    when('/incidents/update/:id', {
        controller: 'IncidentUpdateController',
        templateUrl: '/internal/statuspage/views/incidents/updateIncident.html'
    }).
    when('/incidents/add/stage', {
    controller: 'IncidentAddController',
    resolve: {
      isStage: function(){
        return true;
      }
    },
    templateUrl: '/internal/statuspage/views/incidents/addIncident.html'
  }).
    when('/incidents/add/prod', {
    controller: 'IncidentAddController',
    resolve: {
      isStage: function(){
        return false;
      }
    },
    templateUrl: '/internal/statuspage/views/incidents/addIncident.html'
  }).
    when('/incidents/stage', {
    controller: 'IncidentController',
    resolve: {
      isStage: function(){
        return true;
      }
    },
    templateUrl: '/internal/statuspage/views/incidents/displayIncidents.html'
  }).
    when('/incidents/prod', {
    controller: 'IncidentController',
    resolve: {
      isStage: function(){
        return false;
      }
    },
    templateUrl: '/internal/statuspage/views/incidents/displayIncidents.html'
  })

});

app.controller('GetServicesController', ['$scope','restFactory', 'isStage', '$location', function($scope, restFactory, isStage, $location){

    $scope.redirectToAdd = function(){
      $location.path('/add');
    }

    $scope.redirectToEdit = function(id){
      $location.path('/edit/' + id);
    }


    var url;
    var con = isStage;
    if(con)
    {
        url = "34xc119125xv";
    } else {
        url = "2jzl9rbhcvzm";
    }

    //restFactory.GetJson(url).success(function(data) {

    var data;
    if(con)
    {
        data = {"offset":0,"limit":36,"total":36,"data":[{"status":"operational","name":"Builder","created_at":"2015-05-27T07:46:57.527Z","updated_at":"2015-05-29T09:56:11.602Z","position":1,"description":"https://builder.stage.yaas.io","group_id":"lmbftrys7pbm","id":"g6xn730vydmb","page_id":"34xc119125xv","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Web Sites","created_at":"2015-05-19T12:04:32.927Z","updated_at":"2015-05-19T12:04:32.927Z","position":1,"description":null,"group_id":null,"id":"39tv1zf409mb","page_id":"34xc119125xv","group":true,"only_show_if_degraded":false},{"status":"operational","name":"Avalara Tax","created_at":"2015-05-25T14:52:38.787Z","updated_at":"2015-06-01T16:19:05.067Z","position":1,"description":null,"group_id":"m1896glrr8yb","id":"gcknkhrf80tp","page_id":"34xc119125xv","group":false,"only_show_if_degraded":false},{"status":"operational","name":"YaaS Home","created_at":"2015-05-25T14:36:07.050Z","updated_at":"2015-06-02T06:38:44.397Z","position":1,"description":null,"group_id":"39tv1zf409mb","id":"jx8rj49wrwwk","page_id":"34xc119125xv","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Cart","created_at":"2015-05-25T14:53:05.704Z","updated_at":"2015-05-27T12:11:07.019Z","position":2,"description":null,"group_id":"m1896glrr8yb","id":"krxs8v5dw28c","page_id":"34xc119125xv","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Commerce Module","created_at":"2015-05-27T09:35:40.910Z","updated_at":"2015-05-29T09:56:11.617Z","position":2,"description":null,"group_id":"lmbftrys7pbm","id":"2m4cd404lzfn","page_id":"34xc119125xv","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Services","created_at":"2015-05-25T14:45:31.816Z","updated_at":"2015-05-25T14:45:31.816Z","position":2,"description":null,"group_id":null,"id":"m1896glrr8yb","page_id":"34xc119125xv","group":true,"only_show_if_degraded":false},{"status":"operational","name":"Cart Calculation","created_at":"2015-05-25T14:53:17.463Z","updated_at":"2015-06-01T19:07:38.696Z","position":3,"description":null,"group_id":"m1896glrr8yb","id":"01d9td6vx5ry","page_id":"34xc119125xv","group":false,"only_show_if_degraded":false},{"status":"operational","name":"YaaS Market Operator Module","created_at":"2015-05-27T09:35:58.079Z","updated_at":"2015-05-29T09:56:11.631Z","position":3,"description":null,"group_id":"lmbftrys7pbm","id":"6dv55s9smn06","page_id":"34xc119125xv","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Dev Portal","created_at":"2015-05-19T12:04:32.944Z","updated_at":"2015-05-29T13:18:08.476Z","position":3,"description":null,"group_id":"39tv1zf409mb","id":"qrdcx64bf4qb","page_id":"34xc119125xv","group":false,"only_show_if_degraded":false},{"status":"operational","name":"YaaS Market","created_at":"2015-05-25T14:36:25.479Z","updated_at":"2015-05-31T21:37:02.048Z","position":4,"description":null,"group_id":"39tv1zf409mb","id":"ffyp8xhtwnbv","page_id":"34xc119125xv","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Category","created_at":"2015-05-25T14:53:30.305Z","updated_at":"2015-06-02T08:29:17.537Z","position":4,"description":null,"group_id":"m1896glrr8yb","id":"gr892fqpyk01","page_id":"34xc119125xv","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Builder","created_at":"2015-05-27T09:35:40.899Z","updated_at":"2015-05-29T09:55:23.654Z","position":4,"description":null,"group_id":null,"id":"lmbftrys7pbm","page_id":"34xc119125xv","group":true,"only_show_if_degraded":false},{"status":"operational","name":"Deployment","created_at":"2015-05-26T14:47:04.308Z","updated_at":"2015-06-01T07:11:04.411Z","position":5,"description":null,"group_id":null,"id":"4lvrc0k8tzlp","page_id":"34xc119125xv","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Storefront","created_at":"2015-05-25T14:37:00.780Z","updated_at":"2015-05-27T12:06:00.014Z","position":5,"description":null,"group_id":"39tv1zf409mb","id":"j9yd7fkkmg24","page_id":"34xc119125xv","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Checkout Mashup","created_at":"2015-05-25T14:53:42.405Z","updated_at":"2015-05-27T12:11:23.549Z","position":5,"description":null,"group_id":"m1896glrr8yb","id":"cyn9x4zlk922","page_id":"34xc119125xv","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Configuration","created_at":"2015-05-25T14:47:16.159Z","updated_at":"2015-06-01T16:28:00.280Z","position":6,"description":null,"group_id":"m1896glrr8yb","id":"mll35ht60x6g","page_id":"34xc119125xv","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Test","created_at":"2015-06-01T14:04:12.500Z","updated_at":"2015-06-02T08:38:00.668Z","position":6,"description":"undefined","group_id":"39tv1zf409mb","id":"dtx719kdg3b3","page_id":"34xc119125xv","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Coupon","created_at":"2015-05-25T14:53:54.663Z","updated_at":"2015-05-27T12:11:36.718Z","position":7,"description":null,"group_id":"m1896glrr8yb","id":"sr1sjdyvk9j3","page_id":"34xc119125xv","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Customer","created_at":"2015-05-25T14:54:06.160Z","updated_at":"2015-06-01T22:35:09.188Z","position":8,"description":null,"group_id":"m1896glrr8yb","id":"yk21xzjtt1wq","page_id":"34xc119125xv","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Document Repository","created_at":"2015-05-25T14:45:31.827Z","updated_at":"2015-05-27T12:11:43.432Z","position":9,"description":null,"group_id":"m1896glrr8yb","id":"x27zs5y02v1h","page_id":"34xc119125xv","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Email","created_at":"2015-05-25T14:50:20.138Z","updated_at":"2015-06-01T16:27:30.175Z","position":10,"description":null,"group_id":"m1896glrr8yb","id":"qx5bh7s0vsj8","page_id":"34xc119125xv","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Flatrate Tax","created_at":"2015-05-25T14:52:52.714Z","updated_at":"2015-06-01T19:07:26.368Z","position":11,"description":null,"group_id":"m1896glrr8yb","id":"dh5bm65dfrm8","page_id":"34xc119125xv","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Media Repository","created_at":"2015-05-25T14:50:37.168Z","updated_at":"2015-05-27T12:12:17.112Z","position":12,"description":null,"group_id":"m1896glrr8yb","id":"6sy3ld0mm0md","page_id":"34xc119125xv","group":false,"only_show_if_degraded":false},{"status":"operational","name":"OAuth2","created_at":"2015-05-25T14:50:50.015Z","updated_at":"2015-05-27T12:12:17.128Z","position":13,"description":null,"group_id":"m1896glrr8yb","id":"xg3f4h459tcy","page_id":"34xc119125xv","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Order","created_at":"2015-05-25T14:54:17.909Z","updated_at":"2015-06-02T08:32:27.401Z","position":14,"description":null,"group_id":"m1896glrr8yb","id":"71ss5n3d2dls","page_id":"34xc119125xv","group":false,"only_show_if_degraded":false},{"status":"operational","name":"PCM","created_at":"2015-05-25T14:54:53.648Z","updated_at":"2015-06-02T08:29:29.361Z","position":15,"description":null,"group_id":"m1896glrr8yb","id":"3nbd6g5pxr1c","page_id":"34xc119125xv","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Price","created_at":"2015-05-25T14:55:04.813Z","updated_at":"2015-06-02T06:38:44.412Z","position":16,"description":null,"group_id":"m1896glrr8yb","id":"32c5mlg72mtb","page_id":"34xc119125xv","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Product","created_at":"2015-05-25T14:55:18.371Z","updated_at":"2015-06-02T08:29:47.503Z","position":17,"description":null,"group_id":"m1896glrr8yb","id":"rddk2840v4lm","page_id":"34xc119125xv","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Product Details","created_at":"2015-05-25T14:55:30.411Z","updated_at":"2015-06-02T08:29:07.562Z","position":18,"description":null,"group_id":"m1896glrr8yb","id":"sm9nm14jn59t","page_id":"34xc119125xv","group":false,"only_show_if_degraded":false},{"status":"operational","name":"PubSub","created_at":"2015-05-25T14:51:56.064Z","updated_at":"2015-06-02T07:09:15.776Z","position":19,"description":null,"group_id":"m1896glrr8yb","id":"6l3hjz4wfqq8","page_id":"34xc119125xv","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Schema Repository","created_at":"2015-05-25T14:52:07.698Z","updated_at":"2015-06-01T16:27:30.121Z","position":20,"description":null,"group_id":"m1896glrr8yb","id":"b7w1zz5yfyt9","page_id":"34xc119125xv","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Search","created_at":"2015-05-25T14:52:23.045Z","updated_at":"2015-05-27T12:12:47.473Z","position":21,"description":null,"group_id":"m1896glrr8yb","id":"dzkn00mvgzc1","page_id":"34xc119125xv","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Shipping Cost","created_at":"2015-05-25T14:55:45.425Z","updated_at":"2015-06-02T08:29:47.454Z","position":22,"description":null,"group_id":"m1896glrr8yb","id":"2zrp3jpm4pz0","page_id":"34xc119125xv","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Site Settings","created_at":"2015-05-25T14:55:57.566Z","updated_at":"2015-06-02T08:32:17.494Z","position":23,"description":null,"group_id":"m1896glrr8yb","id":"c05mzmyr7mxp","page_id":"34xc119125xv","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Stripe Payment","created_at":"2015-05-25T14:56:12.451Z","updated_at":"2015-06-01T17:27:02.315Z","position":24,"description":null,"group_id":"m1896glrr8yb","id":"wjxhxy0c5ty4","page_id":"34xc119125xv","group":false,"only_show_if_degraded":false}]}
    } else {
        data = {"offset":0,"limit":35,"total":35,"data":[{"status":"operational","name":"Builder","created_at":"2015-05-27T07:46:46.068Z","updated_at":"2015-05-29T10:47:13.765Z","position":1,"description":"https://builder.yaas.io","group_id":"fx94tgnml2mn","id":"mbsjjxw33ksx","page_id":"2jzl9rbhcvzm","group":false,"only_show_if_degraded":false},{"status":"operational","name":"YaaS Home","created_at":"2015-05-25T12:18:27.327Z","updated_at":"2015-05-27T12:05:30.301Z","position":1,"description":"https://yaas.io/home/","group_id":"wgy9lnp4klv3","id":"7nz860vmkzfq","page_id":"2jzl9rbhcvzm","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Avalara Tax","created_at":"2015-05-25T12:06:22.350Z","updated_at":"2015-05-27T12:07:05.606Z","position":1,"description":null,"group_id":"7fbp8tfrjmd8","id":"my6ptyy0bj3j","page_id":"2jzl9rbhcvzm","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Web Sites","created_at":"2015-05-19T12:04:58.762Z","updated_at":"2015-05-19T12:04:58.762Z","position":1,"description":null,"group_id":null,"id":"wgy9lnp4klv3","page_id":"2jzl9rbhcvzm","group":true,"only_show_if_degraded":false},{"status":"operational","name":"Cart","created_at":"2015-05-25T12:06:47.109Z","updated_at":"2015-05-27T12:07:40.592Z","position":2,"description":null,"group_id":"7fbp8tfrjmd8","id":"3pfhh0hk46m1","page_id":"2jzl9rbhcvzm","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Commerce Module","created_at":"2015-05-27T09:38:59.753Z","updated_at":"2015-05-29T10:47:13.777Z","position":2,"description":null,"group_id":"fx94tgnml2mn","id":"55qd4r11qk7g","page_id":"2jzl9rbhcvzm","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Services","created_at":"2015-05-21T11:22:13.492Z","updated_at":"2015-05-21T11:22:13.492Z","position":2,"description":null,"group_id":null,"id":"7fbp8tfrjmd8","page_id":"2jzl9rbhcvzm","group":true,"only_show_if_degraded":false},{"status":"operational","name":"Builder","created_at":"2015-05-27T09:38:59.742Z","updated_at":"2015-05-29T10:46:51.952Z","position":3,"description":null,"group_id":null,"id":"fx94tgnml2mn","page_id":"2jzl9rbhcvzm","group":true,"only_show_if_degraded":false},{"status":"operational","name":"Dev Portal","created_at":"2015-05-19T12:04:58.884Z","updated_at":"2015-05-27T12:05:30.328Z","position":3,"description":"https://devportal.yaas.io","group_id":"wgy9lnp4klv3","id":"pck5cpwsj14j","page_id":"2jzl9rbhcvzm","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Cart Calculation","created_at":"2015-05-25T12:15:08.400Z","updated_at":"2015-05-27T12:07:45.569Z","position":3,"description":null,"group_id":"7fbp8tfrjmd8","id":"jm65h7d7nv77","page_id":"2jzl9rbhcvzm","group":false,"only_show_if_degraded":false},{"status":"operational","name":"YaaS Market","created_at":"2015-05-25T12:18:47.221Z","updated_at":"2015-05-27T12:05:22.539Z","position":4,"description":"https://appexchange.yaas.io","group_id":"wgy9lnp4klv3","id":"hy49pmzwwlnc","page_id":"2jzl9rbhcvzm","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Deployment","created_at":"2015-05-27T12:02:11.551Z","updated_at":"2015-06-01T16:00:30.618Z","position":4,"description":null,"group_id":null,"id":"3nxj1xmy5fjc","page_id":"2jzl9rbhcvzm","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Category","created_at":"2015-05-25T12:15:22.318Z","updated_at":"2015-05-27T14:08:31.307Z","position":4,"description":null,"group_id":"7fbp8tfrjmd8","id":"26yd7d345kj5","page_id":"2jzl9rbhcvzm","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Checkout Mashup","created_at":"2015-05-25T12:15:35.421Z","updated_at":"2015-05-27T12:08:29.759Z","position":5,"description":null,"group_id":"7fbp8tfrjmd8","id":"wbjkx9c8cff4","page_id":"2jzl9rbhcvzm","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Storefront","created_at":"2015-05-25T12:19:19.558Z","updated_at":"2015-06-01T13:50:13.009Z","position":5,"description":"https://shops.yaas.io","group_id":"wgy9lnp4klv3","id":"2rzjhtgtf1bv","page_id":"2jzl9rbhcvzm","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Raml Patterns","created_at":"2015-05-25T12:19:33.419Z","updated_at":"2015-05-27T12:05:22.569Z","position":6,"description":"https://api.yaas.io/patterns/","group_id":"wgy9lnp4klv3","id":"0m152lc2xmzt","page_id":"2jzl9rbhcvzm","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Configuration","created_at":"2015-05-25T11:56:54.382Z","updated_at":"2015-05-28T07:50:54.190Z","position":6,"description":null,"group_id":"7fbp8tfrjmd8","id":"qlpprwn065d8","page_id":"2jzl9rbhcvzm","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Coupon","created_at":"2015-05-25T12:15:44.849Z","updated_at":"2015-05-27T12:08:29.787Z","position":7,"description":null,"group_id":"7fbp8tfrjmd8","id":"g09kz361hppx","page_id":"2jzl9rbhcvzm","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Customer","created_at":"2015-05-25T12:15:56.120Z","updated_at":"2015-06-01T20:52:36.466Z","position":8,"description":null,"group_id":"7fbp8tfrjmd8","id":"xgrld6s8t540","page_id":"2jzl9rbhcvzm","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Document Repository","created_at":"2015-05-21T11:22:13.503Z","updated_at":"2015-05-27T12:08:37.441Z","position":9,"description":null,"group_id":"7fbp8tfrjmd8","id":"5v058mc9zyrm","page_id":"2jzl9rbhcvzm","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Email","created_at":"2015-05-25T11:57:11.512Z","updated_at":"2015-05-29T17:33:23.132Z","position":10,"description":null,"group_id":"7fbp8tfrjmd8","id":"t59f9fm2v9bn","page_id":"2jzl9rbhcvzm","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Flatrate Tax","created_at":"2015-05-25T12:06:34.796Z","updated_at":"2015-05-27T12:08:46.370Z","position":11,"description":null,"group_id":"7fbp8tfrjmd8","id":"yf3g6qh64jvn","page_id":"2jzl9rbhcvzm","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Media Repository","created_at":"2015-05-25T11:57:23.324Z","updated_at":"2015-05-28T07:24:24.112Z","position":12,"description":null,"group_id":"7fbp8tfrjmd8","id":"g7q6f49kxr9m","page_id":"2jzl9rbhcvzm","group":false,"only_show_if_degraded":false},{"status":"operational","name":"OAuth2","created_at":"2015-05-25T11:57:36.602Z","updated_at":"2015-05-27T12:08:46.399Z","position":13,"description":null,"group_id":"7fbp8tfrjmd8","id":"139hdym7k7cy","page_id":"2jzl9rbhcvzm","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Order","created_at":"2015-05-25T12:16:09.056Z","updated_at":"2015-05-27T12:09:24.159Z","position":14,"description":null,"group_id":"7fbp8tfrjmd8","id":"f3c3k0b0wwxl","page_id":"2jzl9rbhcvzm","group":false,"only_show_if_degraded":false},{"status":"operational","name":"PCM","created_at":"2015-05-25T12:16:37.823Z","updated_at":"2015-05-27T14:08:51.000Z","position":15,"description":null,"group_id":"7fbp8tfrjmd8","id":"gbvpm1166jqt","page_id":"2jzl9rbhcvzm","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Price","created_at":"2015-05-25T12:16:50.362Z","updated_at":"2015-05-27T12:09:55.175Z","position":16,"description":null,"group_id":"7fbp8tfrjmd8","id":"95w5d9s9mpfr","page_id":"2jzl9rbhcvzm","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Product","created_at":"2015-05-25T12:17:03.014Z","updated_at":"2015-05-27T12:09:59.249Z","position":17,"description":null,"group_id":"7fbp8tfrjmd8","id":"4s575ld7d51s","page_id":"2jzl9rbhcvzm","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Product Details","created_at":"2015-05-25T12:17:14.949Z","updated_at":"2015-05-27T12:10:05.921Z","position":18,"description":null,"group_id":"7fbp8tfrjmd8","id":"ycfl24t8258r","page_id":"2jzl9rbhcvzm","group":false,"only_show_if_degraded":false},{"status":"operational","name":"PubSub","created_at":"2015-05-25T12:05:28.513Z","updated_at":"2015-06-02T07:14:05.644Z","position":19,"description":null,"group_id":"7fbp8tfrjmd8","id":"sljn38ts8bsy","page_id":"2jzl9rbhcvzm","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Schema Repository","created_at":"2015-05-25T12:05:41.891Z","updated_at":"2015-05-27T12:10:05.947Z","position":20,"description":null,"group_id":"7fbp8tfrjmd8","id":"qyd69zhhd24j","page_id":"2jzl9rbhcvzm","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Search","created_at":"2015-05-25T12:05:57.633Z","updated_at":"2015-05-27T12:10:05.959Z","position":21,"description":null,"group_id":"7fbp8tfrjmd8","id":"g0v8vn3c4yry","page_id":"2jzl9rbhcvzm","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Shipping Cost","created_at":"2015-05-25T12:17:29.780Z","updated_at":"2015-05-29T17:33:03.337Z","position":22,"description":null,"group_id":"7fbp8tfrjmd8","id":"7np72r0k91hg","page_id":"2jzl9rbhcvzm","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Site Settings","created_at":"2015-05-25T12:17:42.164Z","updated_at":"2015-05-29T17:33:23.112Z","position":23,"description":null,"group_id":"7fbp8tfrjmd8","id":"nn0pwy76hydl","page_id":"2jzl9rbhcvzm","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Stripe Payment","created_at":"2015-05-25T12:18:12.442Z","updated_at":"2015-05-27T12:07:02.115Z","position":24,"description":null,"group_id":"7fbp8tfrjmd8","id":"0y8znf4s7vlv","page_id":"2jzl9rbhcvzm","group":false,"only_show_if_degraded":false}]}
    }

            $scope.response = data;

            $scope.headers = [];
            angular.forEach($scope.response.data, function(element) {
                //console.log(element.group)
                if (element.group == true)
                    $scope.headers.push(element);
            });

            $scope.objects = [];
            angular.forEach($scope.headers, function(element) {
                var id = element.id;
                var object = {
                    title: element.name,
                    id: element.id,
                    elements: []
                };

                angular.forEach($scope.response.data, function(el) {
                    if (angular.equals(el.group_id, element.id))
                        object.elements.push(el);
                });

                $scope.objects.push(object);
                //console.log('added');
            });
        //});
}]);


app.controller('AddServicesController', ['$scope','$http', 'isStage', 'helper', '$location',  function($scope, $http, isStage, helper, $location){


    /*restFactory.GetJson('34xc119125xv').success(function(data) {

        $scope.json_stage = data;
    });

    restFactory.GetJson('2jzl9rbhcvzm').success(function(data) {

        $scope.json_prod = data;
    });*/

    //$scope.json_stage = {"offset":0,"limit":36,"total":36,"data":[{"status":"operational","name":"Builder","created_at":"2015-05-27T07:46:57.527Z","updated_at":"2015-05-29T09:56:11.602Z","position":1,"description":"https://builder.stage.yaas.io","group_id":"lmbftrys7pbm","id":"g6xn730vydmb","page_id":"34xc119125xv","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Web Sites","created_at":"2015-05-19T12:04:32.927Z","updated_at":"2015-05-19T12:04:32.927Z","position":1,"description":null,"group_id":null,"id":"39tv1zf409mb","page_id":"34xc119125xv","group":true,"only_show_if_degraded":false},{"status":"operational","name":"Avalara Tax","created_at":"2015-05-25T14:52:38.787Z","updated_at":"2015-06-01T16:19:05.067Z","position":1,"description":null,"group_id":"m1896glrr8yb","id":"gcknkhrf80tp","page_id":"34xc119125xv","group":false,"only_show_if_degraded":false},{"status":"operational","name":"YaaS Home","created_at":"2015-05-25T14:36:07.050Z","updated_at":"2015-06-02T06:38:44.397Z","position":1,"description":null,"group_id":"39tv1zf409mb","id":"jx8rj49wrwwk","page_id":"34xc119125xv","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Cart","created_at":"2015-05-25T14:53:05.704Z","updated_at":"2015-05-27T12:11:07.019Z","position":2,"description":null,"group_id":"m1896glrr8yb","id":"krxs8v5dw28c","page_id":"34xc119125xv","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Commerce Module","created_at":"2015-05-27T09:35:40.910Z","updated_at":"2015-05-29T09:56:11.617Z","position":2,"description":null,"group_id":"lmbftrys7pbm","id":"2m4cd404lzfn","page_id":"34xc119125xv","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Services","created_at":"2015-05-25T14:45:31.816Z","updated_at":"2015-05-25T14:45:31.816Z","position":2,"description":null,"group_id":null,"id":"m1896glrr8yb","page_id":"34xc119125xv","group":true,"only_show_if_degraded":false},{"status":"operational","name":"Cart Calculation","created_at":"2015-05-25T14:53:17.463Z","updated_at":"2015-06-01T19:07:38.696Z","position":3,"description":null,"group_id":"m1896glrr8yb","id":"01d9td6vx5ry","page_id":"34xc119125xv","group":false,"only_show_if_degraded":false},{"status":"operational","name":"YaaS Market Operator Module","created_at":"2015-05-27T09:35:58.079Z","updated_at":"2015-05-29T09:56:11.631Z","position":3,"description":null,"group_id":"lmbftrys7pbm","id":"6dv55s9smn06","page_id":"34xc119125xv","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Dev Portal","created_at":"2015-05-19T12:04:32.944Z","updated_at":"2015-05-29T13:18:08.476Z","position":3,"description":null,"group_id":"39tv1zf409mb","id":"qrdcx64bf4qb","page_id":"34xc119125xv","group":false,"only_show_if_degraded":false},{"status":"operational","name":"YaaS Market","created_at":"2015-05-25T14:36:25.479Z","updated_at":"2015-05-31T21:37:02.048Z","position":4,"description":null,"group_id":"39tv1zf409mb","id":"ffyp8xhtwnbv","page_id":"34xc119125xv","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Category","created_at":"2015-05-25T14:53:30.305Z","updated_at":"2015-06-02T08:29:17.537Z","position":4,"description":null,"group_id":"m1896glrr8yb","id":"gr892fqpyk01","page_id":"34xc119125xv","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Builder","created_at":"2015-05-27T09:35:40.899Z","updated_at":"2015-05-29T09:55:23.654Z","position":4,"description":null,"group_id":null,"id":"lmbftrys7pbm","page_id":"34xc119125xv","group":true,"only_show_if_degraded":false},{"status":"operational","name":"Deployment","created_at":"2015-05-26T14:47:04.308Z","updated_at":"2015-06-01T07:11:04.411Z","position":5,"description":null,"group_id":null,"id":"4lvrc0k8tzlp","page_id":"34xc119125xv","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Storefront","created_at":"2015-05-25T14:37:00.780Z","updated_at":"2015-05-27T12:06:00.014Z","position":5,"description":null,"group_id":"39tv1zf409mb","id":"j9yd7fkkmg24","page_id":"34xc119125xv","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Checkout Mashup","created_at":"2015-05-25T14:53:42.405Z","updated_at":"2015-05-27T12:11:23.549Z","position":5,"description":null,"group_id":"m1896glrr8yb","id":"cyn9x4zlk922","page_id":"34xc119125xv","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Configuration","created_at":"2015-05-25T14:47:16.159Z","updated_at":"2015-06-01T16:28:00.280Z","position":6,"description":null,"group_id":"m1896glrr8yb","id":"mll35ht60x6g","page_id":"34xc119125xv","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Test","created_at":"2015-06-01T14:04:12.500Z","updated_at":"2015-06-02T08:38:00.668Z","position":6,"description":"undefined","group_id":"39tv1zf409mb","id":"dtx719kdg3b3","page_id":"34xc119125xv","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Coupon","created_at":"2015-05-25T14:53:54.663Z","updated_at":"2015-05-27T12:11:36.718Z","position":7,"description":null,"group_id":"m1896glrr8yb","id":"sr1sjdyvk9j3","page_id":"34xc119125xv","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Customer","created_at":"2015-05-25T14:54:06.160Z","updated_at":"2015-06-01T22:35:09.188Z","position":8,"description":null,"group_id":"m1896glrr8yb","id":"yk21xzjtt1wq","page_id":"34xc119125xv","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Document Repository","created_at":"2015-05-25T14:45:31.827Z","updated_at":"2015-05-27T12:11:43.432Z","position":9,"description":null,"group_id":"m1896glrr8yb","id":"x27zs5y02v1h","page_id":"34xc119125xv","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Email","created_at":"2015-05-25T14:50:20.138Z","updated_at":"2015-06-01T16:27:30.175Z","position":10,"description":null,"group_id":"m1896glrr8yb","id":"qx5bh7s0vsj8","page_id":"34xc119125xv","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Flatrate Tax","created_at":"2015-05-25T14:52:52.714Z","updated_at":"2015-06-01T19:07:26.368Z","position":11,"description":null,"group_id":"m1896glrr8yb","id":"dh5bm65dfrm8","page_id":"34xc119125xv","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Media Repository","created_at":"2015-05-25T14:50:37.168Z","updated_at":"2015-05-27T12:12:17.112Z","position":12,"description":null,"group_id":"m1896glrr8yb","id":"6sy3ld0mm0md","page_id":"34xc119125xv","group":false,"only_show_if_degraded":false},{"status":"operational","name":"OAuth2","created_at":"2015-05-25T14:50:50.015Z","updated_at":"2015-05-27T12:12:17.128Z","position":13,"description":null,"group_id":"m1896glrr8yb","id":"xg3f4h459tcy","page_id":"34xc119125xv","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Order","created_at":"2015-05-25T14:54:17.909Z","updated_at":"2015-06-02T08:32:27.401Z","position":14,"description":null,"group_id":"m1896glrr8yb","id":"71ss5n3d2dls","page_id":"34xc119125xv","group":false,"only_show_if_degraded":false},{"status":"operational","name":"PCM","created_at":"2015-05-25T14:54:53.648Z","updated_at":"2015-06-02T08:29:29.361Z","position":15,"description":null,"group_id":"m1896glrr8yb","id":"3nbd6g5pxr1c","page_id":"34xc119125xv","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Price","created_at":"2015-05-25T14:55:04.813Z","updated_at":"2015-06-02T06:38:44.412Z","position":16,"description":null,"group_id":"m1896glrr8yb","id":"32c5mlg72mtb","page_id":"34xc119125xv","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Product","created_at":"2015-05-25T14:55:18.371Z","updated_at":"2015-06-02T08:29:47.503Z","position":17,"description":null,"group_id":"m1896glrr8yb","id":"rddk2840v4lm","page_id":"34xc119125xv","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Product Details","created_at":"2015-05-25T14:55:30.411Z","updated_at":"2015-06-02T08:29:07.562Z","position":18,"description":null,"group_id":"m1896glrr8yb","id":"sm9nm14jn59t","page_id":"34xc119125xv","group":false,"only_show_if_degraded":false},{"status":"operational","name":"PubSub","created_at":"2015-05-25T14:51:56.064Z","updated_at":"2015-06-02T07:09:15.776Z","position":19,"description":null,"group_id":"m1896glrr8yb","id":"6l3hjz4wfqq8","page_id":"34xc119125xv","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Schema Repository","created_at":"2015-05-25T14:52:07.698Z","updated_at":"2015-06-01T16:27:30.121Z","position":20,"description":null,"group_id":"m1896glrr8yb","id":"b7w1zz5yfyt9","page_id":"34xc119125xv","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Search","created_at":"2015-05-25T14:52:23.045Z","updated_at":"2015-05-27T12:12:47.473Z","position":21,"description":null,"group_id":"m1896glrr8yb","id":"dzkn00mvgzc1","page_id":"34xc119125xv","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Shipping Cost","created_at":"2015-05-25T14:55:45.425Z","updated_at":"2015-06-02T08:29:47.454Z","position":22,"description":null,"group_id":"m1896glrr8yb","id":"2zrp3jpm4pz0","page_id":"34xc119125xv","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Site Settings","created_at":"2015-05-25T14:55:57.566Z","updated_at":"2015-06-02T08:32:17.494Z","position":23,"description":null,"group_id":"m1896glrr8yb","id":"c05mzmyr7mxp","page_id":"34xc119125xv","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Stripe Payment","created_at":"2015-05-25T14:56:12.451Z","updated_at":"2015-06-01T17:27:02.315Z","position":24,"description":null,"group_id":"m1896glrr8yb","id":"wjxhxy0c5ty4","page_id":"34xc119125xv","group":false,"only_show_if_degraded":false}]}
    //$scope.json_prod ={"offset":0,"limit":35,"total":35,"data":[{"status":"operational","name":"Builder","created_at":"2015-05-27T07:46:46.068Z","updated_at":"2015-05-29T10:47:13.765Z","position":1,"description":"https://builder.yaas.io","group_id":"fx94tgnml2mn","id":"mbsjjxw33ksx","page_id":"2jzl9rbhcvzm","group":false,"only_show_if_degraded":false},{"status":"operational","name":"YaaS Home","created_at":"2015-05-25T12:18:27.327Z","updated_at":"2015-05-27T12:05:30.301Z","position":1,"description":"https://yaas.io/home/","group_id":"wgy9lnp4klv3","id":"7nz860vmkzfq","page_id":"2jzl9rbhcvzm","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Avalara Tax","created_at":"2015-05-25T12:06:22.350Z","updated_at":"2015-05-27T12:07:05.606Z","position":1,"description":null,"group_id":"7fbp8tfrjmd8","id":"my6ptyy0bj3j","page_id":"2jzl9rbhcvzm","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Web Sites","created_at":"2015-05-19T12:04:58.762Z","updated_at":"2015-05-19T12:04:58.762Z","position":1,"description":null,"group_id":null,"id":"wgy9lnp4klv3","page_id":"2jzl9rbhcvzm","group":true,"only_show_if_degraded":false},{"status":"operational","name":"Cart","created_at":"2015-05-25T12:06:47.109Z","updated_at":"2015-05-27T12:07:40.592Z","position":2,"description":null,"group_id":"7fbp8tfrjmd8","id":"3pfhh0hk46m1","page_id":"2jzl9rbhcvzm","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Commerce Module","created_at":"2015-05-27T09:38:59.753Z","updated_at":"2015-05-29T10:47:13.777Z","position":2,"description":null,"group_id":"fx94tgnml2mn","id":"55qd4r11qk7g","page_id":"2jzl9rbhcvzm","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Services","created_at":"2015-05-21T11:22:13.492Z","updated_at":"2015-05-21T11:22:13.492Z","position":2,"description":null,"group_id":null,"id":"7fbp8tfrjmd8","page_id":"2jzl9rbhcvzm","group":true,"only_show_if_degraded":false},{"status":"operational","name":"Builder","created_at":"2015-05-27T09:38:59.742Z","updated_at":"2015-05-29T10:46:51.952Z","position":3,"description":null,"group_id":null,"id":"fx94tgnml2mn","page_id":"2jzl9rbhcvzm","group":true,"only_show_if_degraded":false},{"status":"operational","name":"Dev Portal","created_at":"2015-05-19T12:04:58.884Z","updated_at":"2015-05-27T12:05:30.328Z","position":3,"description":"https://devportal.yaas.io","group_id":"wgy9lnp4klv3","id":"pck5cpwsj14j","page_id":"2jzl9rbhcvzm","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Cart Calculation","created_at":"2015-05-25T12:15:08.400Z","updated_at":"2015-05-27T12:07:45.569Z","position":3,"description":null,"group_id":"7fbp8tfrjmd8","id":"jm65h7d7nv77","page_id":"2jzl9rbhcvzm","group":false,"only_show_if_degraded":false},{"status":"operational","name":"YaaS Market","created_at":"2015-05-25T12:18:47.221Z","updated_at":"2015-05-27T12:05:22.539Z","position":4,"description":"https://appexchange.yaas.io","group_id":"wgy9lnp4klv3","id":"hy49pmzwwlnc","page_id":"2jzl9rbhcvzm","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Deployment","created_at":"2015-05-27T12:02:11.551Z","updated_at":"2015-06-01T16:00:30.618Z","position":4,"description":null,"group_id":null,"id":"3nxj1xmy5fjc","page_id":"2jzl9rbhcvzm","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Category","created_at":"2015-05-25T12:15:22.318Z","updated_at":"2015-05-27T14:08:31.307Z","position":4,"description":null,"group_id":"7fbp8tfrjmd8","id":"26yd7d345kj5","page_id":"2jzl9rbhcvzm","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Checkout Mashup","created_at":"2015-05-25T12:15:35.421Z","updated_at":"2015-05-27T12:08:29.759Z","position":5,"description":null,"group_id":"7fbp8tfrjmd8","id":"wbjkx9c8cff4","page_id":"2jzl9rbhcvzm","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Storefront","created_at":"2015-05-25T12:19:19.558Z","updated_at":"2015-06-01T13:50:13.009Z","position":5,"description":"https://shops.yaas.io","group_id":"wgy9lnp4klv3","id":"2rzjhtgtf1bv","page_id":"2jzl9rbhcvzm","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Raml Patterns","created_at":"2015-05-25T12:19:33.419Z","updated_at":"2015-05-27T12:05:22.569Z","position":6,"description":"https://api.yaas.io/patterns/","group_id":"wgy9lnp4klv3","id":"0m152lc2xmzt","page_id":"2jzl9rbhcvzm","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Configuration","created_at":"2015-05-25T11:56:54.382Z","updated_at":"2015-05-28T07:50:54.190Z","position":6,"description":null,"group_id":"7fbp8tfrjmd8","id":"qlpprwn065d8","page_id":"2jzl9rbhcvzm","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Coupon","created_at":"2015-05-25T12:15:44.849Z","updated_at":"2015-05-27T12:08:29.787Z","position":7,"description":null,"group_id":"7fbp8tfrjmd8","id":"g09kz361hppx","page_id":"2jzl9rbhcvzm","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Customer","created_at":"2015-05-25T12:15:56.120Z","updated_at":"2015-06-01T20:52:36.466Z","position":8,"description":null,"group_id":"7fbp8tfrjmd8","id":"xgrld6s8t540","page_id":"2jzl9rbhcvzm","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Document Repository","created_at":"2015-05-21T11:22:13.503Z","updated_at":"2015-05-27T12:08:37.441Z","position":9,"description":null,"group_id":"7fbp8tfrjmd8","id":"5v058mc9zyrm","page_id":"2jzl9rbhcvzm","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Email","created_at":"2015-05-25T11:57:11.512Z","updated_at":"2015-05-29T17:33:23.132Z","position":10,"description":null,"group_id":"7fbp8tfrjmd8","id":"t59f9fm2v9bn","page_id":"2jzl9rbhcvzm","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Flatrate Tax","created_at":"2015-05-25T12:06:34.796Z","updated_at":"2015-05-27T12:08:46.370Z","position":11,"description":null,"group_id":"7fbp8tfrjmd8","id":"yf3g6qh64jvn","page_id":"2jzl9rbhcvzm","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Media Repository","created_at":"2015-05-25T11:57:23.324Z","updated_at":"2015-05-28T07:24:24.112Z","position":12,"description":null,"group_id":"7fbp8tfrjmd8","id":"g7q6f49kxr9m","page_id":"2jzl9rbhcvzm","group":false,"only_show_if_degraded":false},{"status":"operational","name":"OAuth2","created_at":"2015-05-25T11:57:36.602Z","updated_at":"2015-05-27T12:08:46.399Z","position":13,"description":null,"group_id":"7fbp8tfrjmd8","id":"139hdym7k7cy","page_id":"2jzl9rbhcvzm","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Order","created_at":"2015-05-25T12:16:09.056Z","updated_at":"2015-05-27T12:09:24.159Z","position":14,"description":null,"group_id":"7fbp8tfrjmd8","id":"f3c3k0b0wwxl","page_id":"2jzl9rbhcvzm","group":false,"only_show_if_degraded":false},{"status":"operational","name":"PCM","created_at":"2015-05-25T12:16:37.823Z","updated_at":"2015-05-27T14:08:51.000Z","position":15,"description":null,"group_id":"7fbp8tfrjmd8","id":"gbvpm1166jqt","page_id":"2jzl9rbhcvzm","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Price","created_at":"2015-05-25T12:16:50.362Z","updated_at":"2015-05-27T12:09:55.175Z","position":16,"description":null,"group_id":"7fbp8tfrjmd8","id":"95w5d9s9mpfr","page_id":"2jzl9rbhcvzm","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Product","created_at":"2015-05-25T12:17:03.014Z","updated_at":"2015-05-27T12:09:59.249Z","position":17,"description":null,"group_id":"7fbp8tfrjmd8","id":"4s575ld7d51s","page_id":"2jzl9rbhcvzm","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Product Details","created_at":"2015-05-25T12:17:14.949Z","updated_at":"2015-05-27T12:10:05.921Z","position":18,"description":null,"group_id":"7fbp8tfrjmd8","id":"ycfl24t8258r","page_id":"2jzl9rbhcvzm","group":false,"only_show_if_degraded":false},{"status":"operational","name":"PubSub","created_at":"2015-05-25T12:05:28.513Z","updated_at":"2015-06-02T07:14:05.644Z","position":19,"description":null,"group_id":"7fbp8tfrjmd8","id":"sljn38ts8bsy","page_id":"2jzl9rbhcvzm","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Schema Repository","created_at":"2015-05-25T12:05:41.891Z","updated_at":"2015-05-27T12:10:05.947Z","position":20,"description":null,"group_id":"7fbp8tfrjmd8","id":"qyd69zhhd24j","page_id":"2jzl9rbhcvzm","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Search","created_at":"2015-05-25T12:05:57.633Z","updated_at":"2015-05-27T12:10:05.959Z","position":21,"description":null,"group_id":"7fbp8tfrjmd8","id":"g0v8vn3c4yry","page_id":"2jzl9rbhcvzm","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Shipping Cost","created_at":"2015-05-25T12:17:29.780Z","updated_at":"2015-05-29T17:33:03.337Z","position":22,"description":null,"group_id":"7fbp8tfrjmd8","id":"7np72r0k91hg","page_id":"2jzl9rbhcvzm","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Site Settings","created_at":"2015-05-25T12:17:42.164Z","updated_at":"2015-05-29T17:33:23.112Z","position":23,"description":null,"group_id":"7fbp8tfrjmd8","id":"nn0pwy76hydl","page_id":"2jzl9rbhcvzm","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Stripe Payment","created_at":"2015-05-25T12:18:12.442Z","updated_at":"2015-05-27T12:07:02.115Z","position":24,"description":null,"group_id":"7fbp8tfrjmd8","id":"0y8znf4s7vlv","page_id":"2jzl9rbhcvzm","group":false,"only_show_if_degraded":false}]}
    //
    //
    //$scope.objects1 = helper.Object(json_stage);
    //$scope.objects2 = helper.Object(json_prod);
    //
    //$scope.categories = {};
    //$scope.$watch('categories', function(newValue, oldValue){
    //    if (newValue == "34xc119125xv"){
    //
    //    }else{
    //
    //    }
    //});


    var url;
    var con = isStage;

    var data;
    if(con)
    {
        data = {"offset":0,"limit":36,"total":36,"data":[{"status":"operational","name":"Builder","created_at":"2015-05-27T07:46:57.527Z","updated_at":"2015-05-29T09:56:11.602Z","position":1,"description":"https://builder.stage.yaas.io","group_id":"lmbftrys7pbm","id":"g6xn730vydmb","page_id":"34xc119125xv","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Web Sites","created_at":"2015-05-19T12:04:32.927Z","updated_at":"2015-05-19T12:04:32.927Z","position":1,"description":null,"group_id":null,"id":"39tv1zf409mb","page_id":"34xc119125xv","group":true,"only_show_if_degraded":false},{"status":"operational","name":"Avalara Tax","created_at":"2015-05-25T14:52:38.787Z","updated_at":"2015-06-01T16:19:05.067Z","position":1,"description":null,"group_id":"m1896glrr8yb","id":"gcknkhrf80tp","page_id":"34xc119125xv","group":false,"only_show_if_degraded":false},{"status":"operational","name":"YaaS Home","created_at":"2015-05-25T14:36:07.050Z","updated_at":"2015-06-02T06:38:44.397Z","position":1,"description":null,"group_id":"39tv1zf409mb","id":"jx8rj49wrwwk","page_id":"34xc119125xv","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Cart","created_at":"2015-05-25T14:53:05.704Z","updated_at":"2015-05-27T12:11:07.019Z","position":2,"description":null,"group_id":"m1896glrr8yb","id":"krxs8v5dw28c","page_id":"34xc119125xv","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Commerce Module","created_at":"2015-05-27T09:35:40.910Z","updated_at":"2015-05-29T09:56:11.617Z","position":2,"description":null,"group_id":"lmbftrys7pbm","id":"2m4cd404lzfn","page_id":"34xc119125xv","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Services","created_at":"2015-05-25T14:45:31.816Z","updated_at":"2015-05-25T14:45:31.816Z","position":2,"description":null,"group_id":null,"id":"m1896glrr8yb","page_id":"34xc119125xv","group":true,"only_show_if_degraded":false},{"status":"operational","name":"Cart Calculation","created_at":"2015-05-25T14:53:17.463Z","updated_at":"2015-06-01T19:07:38.696Z","position":3,"description":null,"group_id":"m1896glrr8yb","id":"01d9td6vx5ry","page_id":"34xc119125xv","group":false,"only_show_if_degraded":false},{"status":"operational","name":"YaaS Market Operator Module","created_at":"2015-05-27T09:35:58.079Z","updated_at":"2015-05-29T09:56:11.631Z","position":3,"description":null,"group_id":"lmbftrys7pbm","id":"6dv55s9smn06","page_id":"34xc119125xv","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Dev Portal","created_at":"2015-05-19T12:04:32.944Z","updated_at":"2015-05-29T13:18:08.476Z","position":3,"description":null,"group_id":"39tv1zf409mb","id":"qrdcx64bf4qb","page_id":"34xc119125xv","group":false,"only_show_if_degraded":false},{"status":"operational","name":"YaaS Market","created_at":"2015-05-25T14:36:25.479Z","updated_at":"2015-05-31T21:37:02.048Z","position":4,"description":null,"group_id":"39tv1zf409mb","id":"ffyp8xhtwnbv","page_id":"34xc119125xv","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Category","created_at":"2015-05-25T14:53:30.305Z","updated_at":"2015-06-02T08:29:17.537Z","position":4,"description":null,"group_id":"m1896glrr8yb","id":"gr892fqpyk01","page_id":"34xc119125xv","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Builder","created_at":"2015-05-27T09:35:40.899Z","updated_at":"2015-05-29T09:55:23.654Z","position":4,"description":null,"group_id":null,"id":"lmbftrys7pbm","page_id":"34xc119125xv","group":true,"only_show_if_degraded":false},{"status":"operational","name":"Deployment","created_at":"2015-05-26T14:47:04.308Z","updated_at":"2015-06-01T07:11:04.411Z","position":5,"description":null,"group_id":null,"id":"4lvrc0k8tzlp","page_id":"34xc119125xv","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Storefront","created_at":"2015-05-25T14:37:00.780Z","updated_at":"2015-05-27T12:06:00.014Z","position":5,"description":null,"group_id":"39tv1zf409mb","id":"j9yd7fkkmg24","page_id":"34xc119125xv","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Checkout Mashup","created_at":"2015-05-25T14:53:42.405Z","updated_at":"2015-05-27T12:11:23.549Z","position":5,"description":null,"group_id":"m1896glrr8yb","id":"cyn9x4zlk922","page_id":"34xc119125xv","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Configuration","created_at":"2015-05-25T14:47:16.159Z","updated_at":"2015-06-01T16:28:00.280Z","position":6,"description":null,"group_id":"m1896glrr8yb","id":"mll35ht60x6g","page_id":"34xc119125xv","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Test","created_at":"2015-06-01T14:04:12.500Z","updated_at":"2015-06-02T08:38:00.668Z","position":6,"description":"undefined","group_id":"39tv1zf409mb","id":"dtx719kdg3b3","page_id":"34xc119125xv","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Coupon","created_at":"2015-05-25T14:53:54.663Z","updated_at":"2015-05-27T12:11:36.718Z","position":7,"description":null,"group_id":"m1896glrr8yb","id":"sr1sjdyvk9j3","page_id":"34xc119125xv","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Customer","created_at":"2015-05-25T14:54:06.160Z","updated_at":"2015-06-01T22:35:09.188Z","position":8,"description":null,"group_id":"m1896glrr8yb","id":"yk21xzjtt1wq","page_id":"34xc119125xv","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Document Repository","created_at":"2015-05-25T14:45:31.827Z","updated_at":"2015-05-27T12:11:43.432Z","position":9,"description":null,"group_id":"m1896glrr8yb","id":"x27zs5y02v1h","page_id":"34xc119125xv","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Email","created_at":"2015-05-25T14:50:20.138Z","updated_at":"2015-06-01T16:27:30.175Z","position":10,"description":null,"group_id":"m1896glrr8yb","id":"qx5bh7s0vsj8","page_id":"34xc119125xv","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Flatrate Tax","created_at":"2015-05-25T14:52:52.714Z","updated_at":"2015-06-01T19:07:26.368Z","position":11,"description":null,"group_id":"m1896glrr8yb","id":"dh5bm65dfrm8","page_id":"34xc119125xv","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Media Repository","created_at":"2015-05-25T14:50:37.168Z","updated_at":"2015-05-27T12:12:17.112Z","position":12,"description":null,"group_id":"m1896glrr8yb","id":"6sy3ld0mm0md","page_id":"34xc119125xv","group":false,"only_show_if_degraded":false},{"status":"operational","name":"OAuth2","created_at":"2015-05-25T14:50:50.015Z","updated_at":"2015-05-27T12:12:17.128Z","position":13,"description":null,"group_id":"m1896glrr8yb","id":"xg3f4h459tcy","page_id":"34xc119125xv","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Order","created_at":"2015-05-25T14:54:17.909Z","updated_at":"2015-06-02T08:32:27.401Z","position":14,"description":null,"group_id":"m1896glrr8yb","id":"71ss5n3d2dls","page_id":"34xc119125xv","group":false,"only_show_if_degraded":false},{"status":"operational","name":"PCM","created_at":"2015-05-25T14:54:53.648Z","updated_at":"2015-06-02T08:29:29.361Z","position":15,"description":null,"group_id":"m1896glrr8yb","id":"3nbd6g5pxr1c","page_id":"34xc119125xv","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Price","created_at":"2015-05-25T14:55:04.813Z","updated_at":"2015-06-02T06:38:44.412Z","position":16,"description":null,"group_id":"m1896glrr8yb","id":"32c5mlg72mtb","page_id":"34xc119125xv","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Product","created_at":"2015-05-25T14:55:18.371Z","updated_at":"2015-06-02T08:29:47.503Z","position":17,"description":null,"group_id":"m1896glrr8yb","id":"rddk2840v4lm","page_id":"34xc119125xv","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Product Details","created_at":"2015-05-25T14:55:30.411Z","updated_at":"2015-06-02T08:29:07.562Z","position":18,"description":null,"group_id":"m1896glrr8yb","id":"sm9nm14jn59t","page_id":"34xc119125xv","group":false,"only_show_if_degraded":false},{"status":"operational","name":"PubSub","created_at":"2015-05-25T14:51:56.064Z","updated_at":"2015-06-02T07:09:15.776Z","position":19,"description":null,"group_id":"m1896glrr8yb","id":"6l3hjz4wfqq8","page_id":"34xc119125xv","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Schema Repository","created_at":"2015-05-25T14:52:07.698Z","updated_at":"2015-06-01T16:27:30.121Z","position":20,"description":null,"group_id":"m1896glrr8yb","id":"b7w1zz5yfyt9","page_id":"34xc119125xv","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Search","created_at":"2015-05-25T14:52:23.045Z","updated_at":"2015-05-27T12:12:47.473Z","position":21,"description":null,"group_id":"m1896glrr8yb","id":"dzkn00mvgzc1","page_id":"34xc119125xv","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Shipping Cost","created_at":"2015-05-25T14:55:45.425Z","updated_at":"2015-06-02T08:29:47.454Z","position":22,"description":null,"group_id":"m1896glrr8yb","id":"2zrp3jpm4pz0","page_id":"34xc119125xv","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Site Settings","created_at":"2015-05-25T14:55:57.566Z","updated_at":"2015-06-02T08:32:17.494Z","position":23,"description":null,"group_id":"m1896glrr8yb","id":"c05mzmyr7mxp","page_id":"34xc119125xv","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Stripe Payment","created_at":"2015-05-25T14:56:12.451Z","updated_at":"2015-06-01T17:27:02.315Z","position":24,"description":null,"group_id":"m1896glrr8yb","id":"wjxhxy0c5ty4","page_id":"34xc119125xv","group":false,"only_show_if_degraded":false}]}
    } else {
        data = {"offset":0,"limit":35,"total":35,"data":[{"status":"operational","name":"Builder","created_at":"2015-05-27T07:46:46.068Z","updated_at":"2015-05-29T10:47:13.765Z","position":1,"description":"https://builder.yaas.io","group_id":"fx94tgnml2mn","id":"mbsjjxw33ksx","page_id":"2jzl9rbhcvzm","group":false,"only_show_if_degraded":false},{"status":"operational","name":"YaaS Home","created_at":"2015-05-25T12:18:27.327Z","updated_at":"2015-05-27T12:05:30.301Z","position":1,"description":"https://yaas.io/home/","group_id":"wgy9lnp4klv3","id":"7nz860vmkzfq","page_id":"2jzl9rbhcvzm","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Avalara Tax","created_at":"2015-05-25T12:06:22.350Z","updated_at":"2015-05-27T12:07:05.606Z","position":1,"description":null,"group_id":"7fbp8tfrjmd8","id":"my6ptyy0bj3j","page_id":"2jzl9rbhcvzm","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Web Sites","created_at":"2015-05-19T12:04:58.762Z","updated_at":"2015-05-19T12:04:58.762Z","position":1,"description":null,"group_id":null,"id":"wgy9lnp4klv3","page_id":"2jzl9rbhcvzm","group":true,"only_show_if_degraded":false},{"status":"operational","name":"Cart","created_at":"2015-05-25T12:06:47.109Z","updated_at":"2015-05-27T12:07:40.592Z","position":2,"description":null,"group_id":"7fbp8tfrjmd8","id":"3pfhh0hk46m1","page_id":"2jzl9rbhcvzm","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Commerce Module","created_at":"2015-05-27T09:38:59.753Z","updated_at":"2015-05-29T10:47:13.777Z","position":2,"description":null,"group_id":"fx94tgnml2mn","id":"55qd4r11qk7g","page_id":"2jzl9rbhcvzm","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Services","created_at":"2015-05-21T11:22:13.492Z","updated_at":"2015-05-21T11:22:13.492Z","position":2,"description":null,"group_id":null,"id":"7fbp8tfrjmd8","page_id":"2jzl9rbhcvzm","group":true,"only_show_if_degraded":false},{"status":"operational","name":"Builder","created_at":"2015-05-27T09:38:59.742Z","updated_at":"2015-05-29T10:46:51.952Z","position":3,"description":null,"group_id":null,"id":"fx94tgnml2mn","page_id":"2jzl9rbhcvzm","group":true,"only_show_if_degraded":false},{"status":"operational","name":"Dev Portal","created_at":"2015-05-19T12:04:58.884Z","updated_at":"2015-05-27T12:05:30.328Z","position":3,"description":"https://devportal.yaas.io","group_id":"wgy9lnp4klv3","id":"pck5cpwsj14j","page_id":"2jzl9rbhcvzm","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Cart Calculation","created_at":"2015-05-25T12:15:08.400Z","updated_at":"2015-05-27T12:07:45.569Z","position":3,"description":null,"group_id":"7fbp8tfrjmd8","id":"jm65h7d7nv77","page_id":"2jzl9rbhcvzm","group":false,"only_show_if_degraded":false},{"status":"operational","name":"YaaS Market","created_at":"2015-05-25T12:18:47.221Z","updated_at":"2015-05-27T12:05:22.539Z","position":4,"description":"https://appexchange.yaas.io","group_id":"wgy9lnp4klv3","id":"hy49pmzwwlnc","page_id":"2jzl9rbhcvzm","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Deployment","created_at":"2015-05-27T12:02:11.551Z","updated_at":"2015-06-01T16:00:30.618Z","position":4,"description":null,"group_id":null,"id":"3nxj1xmy5fjc","page_id":"2jzl9rbhcvzm","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Category","created_at":"2015-05-25T12:15:22.318Z","updated_at":"2015-05-27T14:08:31.307Z","position":4,"description":null,"group_id":"7fbp8tfrjmd8","id":"26yd7d345kj5","page_id":"2jzl9rbhcvzm","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Checkout Mashup","created_at":"2015-05-25T12:15:35.421Z","updated_at":"2015-05-27T12:08:29.759Z","position":5,"description":null,"group_id":"7fbp8tfrjmd8","id":"wbjkx9c8cff4","page_id":"2jzl9rbhcvzm","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Storefront","created_at":"2015-05-25T12:19:19.558Z","updated_at":"2015-06-01T13:50:13.009Z","position":5,"description":"https://shops.yaas.io","group_id":"wgy9lnp4klv3","id":"2rzjhtgtf1bv","page_id":"2jzl9rbhcvzm","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Raml Patterns","created_at":"2015-05-25T12:19:33.419Z","updated_at":"2015-05-27T12:05:22.569Z","position":6,"description":"https://api.yaas.io/patterns/","group_id":"wgy9lnp4klv3","id":"0m152lc2xmzt","page_id":"2jzl9rbhcvzm","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Configuration","created_at":"2015-05-25T11:56:54.382Z","updated_at":"2015-05-28T07:50:54.190Z","position":6,"description":null,"group_id":"7fbp8tfrjmd8","id":"qlpprwn065d8","page_id":"2jzl9rbhcvzm","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Coupon","created_at":"2015-05-25T12:15:44.849Z","updated_at":"2015-05-27T12:08:29.787Z","position":7,"description":null,"group_id":"7fbp8tfrjmd8","id":"g09kz361hppx","page_id":"2jzl9rbhcvzm","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Customer","created_at":"2015-05-25T12:15:56.120Z","updated_at":"2015-06-01T20:52:36.466Z","position":8,"description":null,"group_id":"7fbp8tfrjmd8","id":"xgrld6s8t540","page_id":"2jzl9rbhcvzm","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Document Repository","created_at":"2015-05-21T11:22:13.503Z","updated_at":"2015-05-27T12:08:37.441Z","position":9,"description":null,"group_id":"7fbp8tfrjmd8","id":"5v058mc9zyrm","page_id":"2jzl9rbhcvzm","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Email","created_at":"2015-05-25T11:57:11.512Z","updated_at":"2015-05-29T17:33:23.132Z","position":10,"description":null,"group_id":"7fbp8tfrjmd8","id":"t59f9fm2v9bn","page_id":"2jzl9rbhcvzm","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Flatrate Tax","created_at":"2015-05-25T12:06:34.796Z","updated_at":"2015-05-27T12:08:46.370Z","position":11,"description":null,"group_id":"7fbp8tfrjmd8","id":"yf3g6qh64jvn","page_id":"2jzl9rbhcvzm","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Media Repository","created_at":"2015-05-25T11:57:23.324Z","updated_at":"2015-05-28T07:24:24.112Z","position":12,"description":null,"group_id":"7fbp8tfrjmd8","id":"g7q6f49kxr9m","page_id":"2jzl9rbhcvzm","group":false,"only_show_if_degraded":false},{"status":"operational","name":"OAuth2","created_at":"2015-05-25T11:57:36.602Z","updated_at":"2015-05-27T12:08:46.399Z","position":13,"description":null,"group_id":"7fbp8tfrjmd8","id":"139hdym7k7cy","page_id":"2jzl9rbhcvzm","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Order","created_at":"2015-05-25T12:16:09.056Z","updated_at":"2015-05-27T12:09:24.159Z","position":14,"description":null,"group_id":"7fbp8tfrjmd8","id":"f3c3k0b0wwxl","page_id":"2jzl9rbhcvzm","group":false,"only_show_if_degraded":false},{"status":"operational","name":"PCM","created_at":"2015-05-25T12:16:37.823Z","updated_at":"2015-05-27T14:08:51.000Z","position":15,"description":null,"group_id":"7fbp8tfrjmd8","id":"gbvpm1166jqt","page_id":"2jzl9rbhcvzm","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Price","created_at":"2015-05-25T12:16:50.362Z","updated_at":"2015-05-27T12:09:55.175Z","position":16,"description":null,"group_id":"7fbp8tfrjmd8","id":"95w5d9s9mpfr","page_id":"2jzl9rbhcvzm","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Product","created_at":"2015-05-25T12:17:03.014Z","updated_at":"2015-05-27T12:09:59.249Z","position":17,"description":null,"group_id":"7fbp8tfrjmd8","id":"4s575ld7d51s","page_id":"2jzl9rbhcvzm","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Product Details","created_at":"2015-05-25T12:17:14.949Z","updated_at":"2015-05-27T12:10:05.921Z","position":18,"description":null,"group_id":"7fbp8tfrjmd8","id":"ycfl24t8258r","page_id":"2jzl9rbhcvzm","group":false,"only_show_if_degraded":false},{"status":"operational","name":"PubSub","created_at":"2015-05-25T12:05:28.513Z","updated_at":"2015-06-02T07:14:05.644Z","position":19,"description":null,"group_id":"7fbp8tfrjmd8","id":"sljn38ts8bsy","page_id":"2jzl9rbhcvzm","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Schema Repository","created_at":"2015-05-25T12:05:41.891Z","updated_at":"2015-05-27T12:10:05.947Z","position":20,"description":null,"group_id":"7fbp8tfrjmd8","id":"qyd69zhhd24j","page_id":"2jzl9rbhcvzm","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Search","created_at":"2015-05-25T12:05:57.633Z","updated_at":"2015-05-27T12:10:05.959Z","position":21,"description":null,"group_id":"7fbp8tfrjmd8","id":"g0v8vn3c4yry","page_id":"2jzl9rbhcvzm","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Shipping Cost","created_at":"2015-05-25T12:17:29.780Z","updated_at":"2015-05-29T17:33:03.337Z","position":22,"description":null,"group_id":"7fbp8tfrjmd8","id":"7np72r0k91hg","page_id":"2jzl9rbhcvzm","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Site Settings","created_at":"2015-05-25T12:17:42.164Z","updated_at":"2015-05-29T17:33:23.112Z","position":23,"description":null,"group_id":"7fbp8tfrjmd8","id":"nn0pwy76hydl","page_id":"2jzl9rbhcvzm","group":false,"only_show_if_degraded":false},{"status":"operational","name":"Stripe Payment","created_at":"2015-05-25T12:18:12.442Z","updated_at":"2015-05-27T12:07:02.115Z","position":24,"description":null,"group_id":"7fbp8tfrjmd8","id":"0y8znf4s7vlv","page_id":"2jzl9rbhcvzm","group":false,"only_show_if_degraded":false}]}
    }

    //restFactory.GetJson(url).success(function(data) {
    $scope.objects = helper.Object(data);
    //});

    if(con)
    {
        url = "34xc119125xv";
    } else {
        url = "2jzl9rbhcvzm";
    }

        $scope.newItem = [];
        $scope.model = [];

        $scope.addNew = function(service) {
            $scope.newItem.push(service);
            $scope.service = {};
            console.log("Name: "+service.name);
            console.log("Descr:" +service.descr);
            console.log("Category:"+$scope.model.id);

            angular.module('nonStringSelect', [])
                .run(function($rootScope) {
                    $rootScope.model = {
                        id: 2
                    };
                })
                .directive('convertToNumber', function() {
                    return {
                        require: 'ngModel',
                        link: function(scope, element, attrs, ngModel) {
                            ngModel.$parsers.push(function(val) {
                                return parseInt(val, 10);
                            });
                            ngModel.$formatters.push(function(val) {
                                return '' + val;
                            });
                        }
                    };
                });


            $http.defaults.headers.post["Content-Type"] = "application/x-www-form-urlencoded;charset=utf-8";
            $http.post("https://api.statuspage.io/v1/pages/"+url+"/components?api_key=ce443c41-eea1-4540-af76-a1a7001b2598", "component[group_id]=" + $scope.model.id + "; component[name]=" + service.name + ";component[description]=" + service.descr)
                .success(function(response) {
                    console.log("Element name: " + response.name + "\nElement ID: " + response.id);
                    location.reload();
                });

        }
}]);

app.controller('EditServicesController', ['$scope','$http', 'helper' ,function($scope, $http, helper){

}]);

app.factory('restFactory',['$http', function($http){

    var factory = {};

    var _getJSON = function(url){
        return http.get('https://api.statuspage.io/v2/pages/'+url+'/components.json?api_key=ce443c41-eea1-4540-af76-a1a7001b2598');
    };

    factory.GetJson = _getJSON;


    return factory;
}]);


app.factory('helper',function(){

    var factory = {};

    var _getObject = function(data){
        var response = data;

        var headers = [];
        angular.forEach(response.data, function(element) {
           //console.log(element.group)
           if (element.group == true)
              headers.push(element);
        });

        var objects = [];
        angular.forEach(headers, function(element) {
            var id = element.id;
           var object = {
             title: element.name,
                id: element.id,
                elements: []
         };

            angular.forEach(response.data, function(el) {
                if (angular.equals(el.group_id, element.id))
                    object.elements.push(el);
            });

            objects.push(object);
            //console.log('added');
        });

        return objects;

    };

    factory.Object = _getObject;

    return factory;
});
